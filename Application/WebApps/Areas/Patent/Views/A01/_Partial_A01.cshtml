@using Common.CommonData
@using WebApps.CommonFunction;
@using BussinessFacade.ModuleMemoryData
@using WebApps.Resources;
@{
    ViewBag.Title = "Request for patent registration";
    Layout = "~/ViewsShared/_Layout.cshtml";

    string _App_No = "";
    if (ViewBag.App_No != null)
    {
        _App_No = (string)ViewBag.App_No;
    }
}

<style>
    /*độ rộng tên cột title từng trang là khác nhau nên khai báo ở trang đó luôn*/
    .div-search-title > div {
        width: 120px;
    }

    .div-title-col-2 {
        height: 35px;
        border: 1px solid #aaa;
    }

        .div-title-col-2 > div {
            margin: 9px 5px 0px 7px;
        }
</style>

<div class="d-nav-container" style="background-color:#fff">
    <div class="divCover">
        <div class="d-nav">
            <img src="~/Content/icons/Body-icon-home.png" /> I
            <a href="/home">Home</a>
            <span class="red">></span>
            <a href="javascript:;">@Resource.PatentRegister</a>
        </div>
    </div>
    <div class="divCover">
        <div class="classLine">
        </div>
    </div>

    <div class="divCover">
        @Html.Partial("~/Areas/Home/Views/Shared/_Partial_Quick_Notify.cshtml")
    </div>

</div>
<input type="hidden" id="txtAppCode" value='@ViewBag.AppCode' />


<div class="div-search ">
    <fieldset style="border: 1px solid #dddddd; padding: 1.25rem;margin-top: 15px;">
        <legend style="font-weight:600"> @Resource.PatentRegister.ToUpper()</legend>

        @*thông tin khách hàng mà admin nhập hộ*@
        @Html.Partial("~/Areas/TradeMark/Views/Shared/_PartialCustomer.cshtml")

        @* Case name *@
        @Html.Partial("~/Areas/TradeMark/Views/Shared/_PartialCaseName.cshtml", "0")

        @* 3 - ĐƠN YÊU CẦU SỬA ĐỔI *@
        <div class="divCover cls_form_title">
            <img src="~/Content/icons/category.png" />
            <div class="cls_form_header">
                Chủ đơn dưới đây yêu cầu Cục Sở hữu trí tuệ xem xét đơn và cấp:
            </div>
        </div>

        <div class="div-search-ad">
            <div class="div-search-content">
                <div class="div-radio" style="width:482px">
                    <input type="radio" name="1_rdoLoaiSangChe" id="1_rdBangDocQuyen" value="1" checked="checked">
                    <label>Bằng độc quyền sáng chế</label>
                </div>
            </div>

            <div class="div-search-content">
                <div class="div-radio">
                    <input type="radio" name="1_rdoLoaiSangChe" id="3_rdKieuDangCongNghiep" value="2" disabled>
                    <label>Bằng độc quyền giải pháp hữu ích</label>
                </div>
            </div>
        </div>

        <div class="divCover cls_form_title">
            <img src="~/Content/icons/category.png" />
            <div class="cls_form_header">
                Nguồn gốc đơn
            </div>
        </div>

        <div class="div-search-ad" style="border-top: solid 1px red;">
            <div class="div-search-content">
                <div class="div-radio">
                    <input type="radio" name="2_rdoNguonGocDon" id="2_rdPCT" value="1" onchange="return ShowHiden_NguonGocDon()">
                    <label> Đơn này được nộp trên cơ sở đơn PCT</label>
                </div>
            </div>
        </div>

        <div class="clssDisplaynone" id="divPCT" style="margin-top: 5px">

            <div class="div-search-ad">
                <div class="div-search-title">
                    <div>Số:</div>
                </div>
                <div class="div-search-content">
                    <div>
                        <input type="text" id="txt_PCT_SoDon" style="width:348px" />
                    </div>
                </div>

                <div class="div-search-title">
                    <div>Ngày nộp đơn quốc tế:</div>
                </div>
                <div class="div-search-content">
                    <div>
                        <input type="text" id="txt_PCT_NgayNopQT" />
                    </div>
                </div>
            </div>

            <div class="div-search-ad">
                <div class="div-search-title">
                    <div>Công bố quốc tế số:</div>
                </div>
                <div class="div-search-content">
                    <div>
                        <input type="text" id="txt_PCT_CongBoQT" style="width:250px" />
                    </div>
                </div>

                <div class="div-search-title">
                    <div>Ngày:</div>
                </div>
                <div class="div-search-content">
                    <div>
                        <input type="text" id="txt_PCT_CongBoQTNgay" />
                    </div>
                </div>

                <div class="div-search-title">
                    <div>Ngày VN nếu có:</div>
                </div>
                <div class="div-search-content">
                    <div>
                        <input type="text" id="txt_PCT_CongBoVNNgay" />
                    </div>
                </div>
            </div>

            <div class="div-search-ad">
                <div class="div-search-content">
                    <div class="div-radio" style="margin-left: 0px">
                        <input type="checkbox" name="2_rdo_PCT_SuaDoi" id="2_rdo_PCT_SuaDoi" onchange="return ShowHiden_PCT_SuaDoi()">
                        <label> Có sửa đổi, bổ sung tại thời điểm vào pha quốc gia</label>
                    </div>
                </div>
            </div>

            <div class="clssDisplaynone" id="divPCT_SuaDoi" style="margin-top: 5px;margin-left: 15px;">
                <div class="divCover cls_form_title">
                    <div class="cls_form_header">
                        @Resource.TM3B_NoiDungYCSuaDoi.ToUpper() <i class="redspan">(*)</i>
                    </div>
                </div>

                <div class="div-search-ad">
                    <div class="div-search-content">
                        <div class="div-radio" style="width:382px">
                            <input type="radio" name="4_rdoNoiDungYeuCauSuaDoi" id="4_rdTenChuDon" value="1">
                            <label>@Resource.TM3B_TenChuDon</label>
                        </div>
                    </div>

                    <div class="div-search-content">
                        <div class="div-radio">
                            <input type="radio" name="4_rdoNoiDungYeuCauSuaDoi" id="4_rdDiaChiChuDon" value="2">
                            <label>@Resource.TM3B_DiaChiChuDon</label>
                        </div>
                    </div>
                </div>

                <div class="div-search-ad">
                    <div class="div-search-content">
                        <div class="div-radio" style="width:382px">
                            <input type="radio" name="4_rdoNoiDungYeuCauSuaDoi" id="4_rdnoiDungKhac" value="3">
                            <label>@Resource.TM3B_NoiDungKhac</label>
                        </div>
                    </div>

                    <div class="div-search-title" style="margin-left: 0px !important;">
                        <div>@Resource.TM3B_DeNghiSuaThanh:</div>
                    </div>
                    <div class="div-search-content">
                        <div>
                            <input type="text" placeholder="@Resource.TM3B_DeNghiSuaThanh" id="4_DeNghiSuaThanh" />
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="div-search-ad" style="border-top: solid 1px red;">
            <div class="div-search-content">
                <div class="div-radio">
                    <input type="radio" name="2_rdoNguonGocDon" id="2_rdDQSC" value="2" onchange="return ShowHiden_NguonGocDon()">
                    <label> Đơn được tách từ Đơn yêu cầu cấp Bằng độc quyền sáng chế</label>
                </div>
            </div>
        </div>

        <div class="clssDisplaynone" id="divDQSC" style="margin-top: 5px">

            <div class="div-search-ad">
                <div class="div-search-title">
                    <div>Đơn gốc:</div>
                </div>
                <div class="div-search-content">
                    <div>
                        <input type="text" id="txt_DQSC_SoDon" style="width:348px" />
                    </div>
                </div>

                <div class="div-search-title">
                    <div>Ngày nộp đơn:</div>
                </div>
                <div class="div-search-content">
                    <div>
                        <input type="text" id="txt_DQSC_NgayNop" />
                    </div>
                </div>
            </div>
        </div>

        <div class="div-search-ad" style="border-top: solid 1px red;">
            <div class="div-search-content">
                <div class="div-radio">
                    <input type="radio" name="2_rdoNguonGocDon" id="2_rdGPHI" value="3" onchange="return ShowHiden_NguonGocDon()">
                    <label> Đơn được chuyển từ Đơn yêu cầu cấp Bằng độc quyền giải pháp hữu ích</label>
                </div>
            </div>
        </div>

        <div class="clssDisplaynone" id="divGPHI" style="margin-top: 5px">

            <div class="div-search-ad">
                <div class="div-search-title">
                    <div>Đơn gốc:</div>
                </div>
                <div class="div-search-content">
                    <div>
                        <input type="text" id="txt_GPHI_SoDon" style="width:348px" />
                    </div>
                </div>

                <div class="div-search-title">
                    <div>Ngày nộp đơn:</div>
                </div>
                <div class="div-search-content">
                    <div>
                        <input type="text" id="txt_GPHI_NgayNop" />
                    </div>
                </div>
            </div>
        </div>

        @* 1 - CHỦ ĐƠN*@
        @*<div class="divCover cls_form_title">
            <img src="~/Content/icons/category.png" />
            <div class="cls_form_header">
                @Resource.TM2B_ChuDon
            </div>
        </div>*@


        @*<div id="div_PartialThongTinChuDon">
            @Html.Partial("~/Areas/TradeMark/Views/Shared/_PartialThongTinChuDon.cshtml", "1")
        </div>*@

        <div class="div_full_100_area">
            @Html.Partial("~/Areas/TradeMark/Views/Shared/_PartialTitleChuDon.cshtml", @WebApps.Resources.Resource.lblChuDon.ToUpper())
            @Html.Partial("~/Areas/TradeMark/Views/TradeMarkRegistration/_Partial04NHChuDonKhacTop.cshtml", "1")
        </div>


        <div class="div-search-ad">
            <div class="div-search-content">
                <div class="div-radio" style="width:382px">
                    <input type="radio" name="1_rdoChuDon" value="1" id="rb_1_ChuDonChuyenNhuong" onchange="onChangeChuDonKhac()">
                    <label>Chủ đơn đồng thời là tác giả sáng chế</label>
                </div>
            </div>

            <div class="div-search-content">
                <div class="div-radio">
                    <input type="radio" name="1_rdoChuDon" value="2" id="rdChuDonKhac" onchange="onChangeChuDonKhac()">
                    <label>Ngoài chủ đơn khai tại mục này còn có những chủ đơn khác khai tại trang bổ sung</label>
                </div>
            </div>
        </div>

        @* Thong tin chu don   *@

        <div class="div_full_100_area" style="display:none" id="divChungDonKhac001">
            @Html.Partial("~/Areas/TradeMark/Views/Shared/_PartialTitleChuDonKhac.cshtml", @WebApps.Resources.Resource.lblChuDonKhac.ToUpper())
            <div id="divAddNewChuDon01" hidden="hidden">
                @Html.Partial("~/Areas/TradeMark/Views/TradeMarkRegistration/_Partial04NHChuDonKhacTop.cshtml", "9")
            </div>
        </div>

        <div class="div_full_100_area classChuDonKhac" style="display:none" id="divHiddenChuDon01">
            <a href="javascript:;" onclick="return funcHidden('divAddNewChuDon01','divHiddenChuDon01','01');" style="text-decoration:underline; color: blue;float: right;">@WebApps.Resources.Resource.lblAn</a>
        </div>

        @*CHỦ ĐƠN KHÁC 1*@
        <div id="divAddNewChuDon02" hidden="hidden">
            @Html.Partial("~/Areas/TradeMark/Views/TradeMarkRegistration/_Partial04NHChuDonKhac.cshtml", "10")
        </div>

        <div class="div_full_100_area classChuDonKhac" style="display:none" id="divHiddenChuDon02">
            <a href="javascript:;" onclick="return funcHidden('divAddNewChuDon02','divHiddenChuDon02','02');" style="text-decoration:underline; color: blue;float: right;">@WebApps.Resources.Resource.lblAn</a>
        </div>
        <div id="divAddNewChuDon03" hidden="hidden">
            @Html.Partial("~/Areas/TradeMark/Views/TradeMarkRegistration/_Partial04NHChuDonKhac.cshtml", "11")
        </div>

        <div class="div_full_100_area classChuDonKhac" style="display:none" id="divHiddenChuDon03">
            <a href="javascript:;" onclick="return funcHidden('divAddNewChuDon03','divHiddenChuDon03','03');" style="text-decoration:underline; color: blue;float: right;">@WebApps.Resources.Resource.lblAn</a>
        </div>

        <div id="divAddNewChuDon04" hidden="hidden">
            @Html.Partial("~/Areas/TradeMark/Views/TradeMarkRegistration/_Partial04NHChuDonKhac.cshtml", "12")
        </div>

        <div class="div_full_100_area classChuDonKhac" style="display:none" id="divHiddenChuDon04">
            <a href="javascript:;" onclick="return funcHidden('divAddNewChuDon04','divHiddenChuDon04','04');" style="text-decoration:underline; color: blue;float: right;">@WebApps.Resources.Resource.lblAn</a>
        </div>

        <div class="div_full_100_area" id="divThemChuDon01">

            <a href="javascript:;" onclick="return funcShowOrHiddenCD('divAddNewChuDon01','divHiddenChuDon01');" style="text-decoration:underline; color: blue; ">@WebApps.Resources.Resource.lblChuDonKhac</a>

        </div>
        <div class="div_full_100_area" style="display:none" id="divThemChuDon02">
            <a href="javascript:;" onclick="return funcShowOrHiddenCD('divAddNewChuDon02','divHiddenChuDon02');" style="text-decoration:underline; color: blue;float: right;">@WebApps.Resources.Resource.lblThemChuDon</a>
        </div>
        <div class="div_full_100_area" style="display:none" id="divThemChuDon03">
            <a href="javascript:;" onclick="return funcShowOrHiddenCD('divAddNewChuDon03','divHiddenChuDon03');" style="text-decoration:underline; color: blue;float: right;">@WebApps.Resources.Resource.lblThemChuDon</a>
        </div>
        <div class="div_full_100_area" style="display:none" id="divThemChuDon04">
            <a href="javascript:;" onclick="return funcShowOrHiddenCD('divAddNewChuDon04','divHiddenChuDon04');" style="text-decoration:underline; color: blue;float: right;">@WebApps.Resources.Resource.lblThemChuDon</a>
        </div>
        @* End thong tin chu don *@


        @* 2 - ĐẠI DIỆN CỦA CHỦ ĐƠN *@
        <div class="divCover cls_form_title">
            <img src="~/Content/icons/category.png" />
            <div class="cls_form_header">
                @Resource.TM2B_DaiDienChuDon
            </div>
        </div>

        <div id="div_PartialThongTinDaiDienChuDon">
            @Html.Partial("~/Areas/TradeMark/Views/Shared/_PartialThongTinDaiDienChuDon.cshtml", "2")
        </div>

        <div class="div-search-ad">
            <div class="div-search-title">
                <div>@Resource.TM3C_MaDaiDien:</div>
            </div>
            <div class="div-search-content">
                <div>
                    <input type="text" id="txt_MaDaiDien" />
                </div>
            </div>
        </div>
        @* end 2 *@

        @* Tác giả *@
        <div class="divCover cls_form_title">
            <img src="~/Content/icons/category.png" />
            <div class="cls_form_header">
                Tác giả
            </div>
        </div>

        <div id="div_PartialThongTinTacGia">
            @Html.Partial("~/Areas/TradeMark/Views/Shared/_PartialThongTinTacGia.cshtml", "1")
        </div>

        <div id="divTacGiaKhac">

        </div>

        <div class="div_full_100_area classChuDonKhac">
            <input type="hidden" id="txt_id_tacgia" value="1" />
            <a href="javascript:;" onclick="return ThemTacGia();" style="text-decoration:underline; color: blue;float: left;">Thêm tác giả</a>
        </div>

        @* Tác giả *@
        <div class="divCover cls_form_title">
            <img src="~/Content/icons/category.png" />
            <div class="cls_form_header">
                @WebApps.Resources.Resource.lblYeuCauHuongQuyenUT.ToUpper()
            </div>

            <div style="display: inline-block;  padding-top: 8px; padding-left: 5px;">
                <input type="checkbox" name="0_ckbCoSuDungDonUuTien" value="SDUT" placeholder="0_ckbCoSuDungDonUuTien" id="0_ckbCoSuDungDonUuTien" onchange="return funcChoiseDonUT('0_ckbCoSuDungDonUuTien')" />
                <label><a style="color:blue ;font-weight:bold" id="hrefCo" onclick="return funcChoiseDonUT('0_ckbCoSuDungDonUuTien')">@WebApps.Resources.Resource.lblYes</a></label>
            </div>
            <div style="display: inline-block;">
                <input type="checkbox" name="KO_ckbCoSuDungDonUuTien" value="KO" id="KOUT" onchange="return funcChoiseDonUT('KOUT')" />
                <label><a style="color:blue ;font-weight:bold" id="hrefKhong" onclick="return funcChoiseDonUT('KOUT')">@WebApps.Resources.Resource.lblNo</a></label>
            </div>
        </div>

        <div id="div_ThongTinDonUuTien" class="clssDisplaynone">
            @Html.Partial("~/Areas/TradeMark/Views/Shared/_PartialThongTinQuyenUuTien.cshtml", "1")
        </div>


        @* Yêu cầu thẩm định nội dung *@
        <div class="divCover cls_form_title">
            <img src="~/Content/icons/category.png" />
            <div class="cls_form_header">
                Yêu cầu thẩm định nội dung
            </div>
        </div>

        <div class="div-search-ad">
            <div class="div-search-content">
                <div class="div-radio">
                    <input type="checkbox" id="ckbThamDinhNoiDung">
                    <label> Yêu cầu thẩm định nội dung</label>
                </div>
            </div>
        </div>

        @* Yêu cầu thẩm định nội dung *@
        <div class="divCover cls_form_title">
            <img src="~/Content/icons/category.png" />
            <div class="cls_form_header">
                Chuyển đổi đơn
            </div>
        </div>

        <div class="div-search-ad">
            <div class="div-search-content">
                <div class="div-radio">
                    <input type="checkbox" id="ckbChuyenDoiDon">
                    <label> Đề nghị chuyển thành đơn đăng ký sáng chế có yêu cầu cấp Bằng độc quyền giải pháp hữu ích nếu giải pháp không đáp ứng điều kiện về trình độ sáng tạo</label>
                </div>
            </div>
        </div>

        @* CÁC TÀI LIỆU CÓ TRONG ĐƠN *@
        <div class="divCover cls_form_title">
            <img src="~/Content/icons/category.png" />
            <div class="cls_form_header">
                @Resource.TM2B_TaiLieuCoTrongDon
            </div>
        </div>

        @* id doc | id của check box | level | lable | lable 2 | is upload *@
        @*<div class="div-search-ad">
            <div class="div-search-content">
                <div class="div-checkbox" style="width:450px">
                    <input type="checkbox" name="ckb_6_Doc_ToKhai" id="ckb_6_Doc_ToKhai" value="01_SDD_01" checked="checked">
                    <label>@Resource.TM2B_ToKhaiGom</label>
                </div>
            </div>

            <div class="div-search-title">
                <div>@Resource.TM2B_SoTrang:</div>
            </div>
            <div class="div-search-content">
                <div>
                    <input type="text" placeholder="@Resource.TM2B_SoTrang" id="txt_6_Doc_ToKhai" />
                </div>
            </div>
        </div>
        @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_PartialTaiLieuTrongDon_3B.cshtml", "ckb_6_Doc_ToKhai")*@

        @* 1 Tờ khai *@
        @{
            string _doc_id1 = "A01_01";
            string _model1 = _doc_id1 + "|Doc_01|0|" + Resource.TM2B_ToKhaiGom + "|" + Resource.TM2B_SoTrang + "|1||" + Resource.lblSoBan;
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model1)
        }

        @* 2. Bản mô tả, bằng tiếng *@
        @{
            string _doc_id2 = "A01_02";
            string _model2 = _doc_id2 + "|Doc_02|0|" + "Bản mô tả, bằng tiếng " + "|" + Resource.TM3B_Tieng + "|1||" + Resource.TM2B_SoTrang;
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model2)
        }

        @* 3. Bản sao *@
        @{
            string _doc_id3 = "A01_03";
            string _model3 = _doc_id3 + "|Doc_03|0|" + "Bản sao chứng từ nộp phí, lệ phí" + "|" + Resource.TM2B_SoTrang + "|1";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model3)
        }


        @{
            string _doc_id4 = "A01_04";
            string _model4 = _doc_id4 + "|Doc_04|0|" + "Bản tóm tắt, bằng tiếng " + "|" + Resource.TM3B_Tieng + "|1||" + Resource.TM2B_SoTrang;
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model4)
        }


        @{
            string _doc_id5 = "A01_05";
            string _model5 = _doc_id5 + "|Doc_05|0|" + "Bản dịch tiếng Việt, gồm " + "|" + Resource.TM2B_SoTrang + "|1";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model5)
        }

        @* 6 Giấy uỷ quyền bằng tiếng *@
        @{
            string _doc_id6 = "A01_06";
            string _model6 = _doc_id6 + "|Doc_06|0|" + Resource.TM3B_GiayUyQuyenBangTieng + "|" + Resource.TM3B_Tieng + "|1";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model6)
        }

        @* 7  Bản dịch tiếng Việt, gồm *@
        @{
            string _doc_id7 = "A01_07";
            string _model7 = _doc_id7 + "|Doc_07|1|" + Resource.TM3B_BanDichTiengVietGom + "|" + Resource.TM2B_SoTrang + "|1";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model7)
        }

        @* 8 Bản gốc *@
        @{
            string _doc_id8 = "A01_08";
            string _model8 = _doc_id8 + "|Doc_08|1|" + Resource.TM2B_BanGoc + "||1";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model8)
        }

        @* 9 Bản sao *@
        @{
            string _doc_id9 = "A01_09";
            string _model9 = _doc_id9 + "|Doc_09|1|" + Resource.TM2B_BanSao + "||0";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model9)
        }


        @* 10 Bản sao  > Bản gốc sẽ nộp sau *@
        @{
            string _doc_id10 = "A01_10";
            string _model10 = _doc_id10 + "|Doc_10|2|" + Resource.TM2B_BanGocSeNopSau + "||1";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model10)
        }

        @* 11 Bản sao  > Bản gốc đã nộp theo đơn *@
        @{
            string _doc_id11 = "A01_11";
            string _model11 = _doc_id11 + "|Doc_11|2|" + Resource.TM2B_BanGocDaNopTheo + "|" + Resource.TM2B_SodonNopTheo + "|0";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model11)
        }

        @* 12 Tài liệu chứng minh quyền ưu tiên *@
        @{
            string _doc_id12 = "A01_12";
            string _model12 = _doc_id12 + "|Doc_12|0|" + "Tài liệu chứng minh quyền ưu tiên " + "||0";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model12)
        }

        @{
            string _doc_id13 = "A01_13";
            string _model13 = _doc_id13 + "|Doc_13|1|" + "Bản sao đơn đầu tiên, gồm " + "|" + Resource.lblBan + "|1";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model13)
        }

        @{
            string _doc_id14 = "A01_14";
            string _model14 = _doc_id14 + "|Doc_14|1|" + "Giấy chuyển nhượng quyền ưu tiên (nếu thụ hưởng từ người khác)" + "||1";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model14)
        }

        @{
            string _doc_id15 = "A01_15";
            string _model15 = _doc_id15 + "|Doc_15|0|" + "Tài liệu xác nhận quyền đăng ký (nếu thụ hưởng từ người khác)" + "||1";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model15)
        }

        @{
            string _doc_id16 = "A01_16";
            string _model16 = _doc_id16 + "|Doc_16|0|" + "Có tài liệu bổ trợ khai tại trang bổ sung" + "||1";
            @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_Partial_Document.cshtml", _model16)
        }

        @* Cam kết của chủ đơn *@
        @Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_PartialCamKetChuDon.cshtml")

        @if (WebApps.Session.SessionData.CurrentUser.Type != (int)CommonEnums.UserType.Customer)
        {
            @Html.Partial("~/Areas/TradeMark/Views/Shared/_PartialDuLieuQuaKhu.cshtml", "1")
        }

        <div class="class_save">
            <div class="classGuiDon">
                <input type="button" value="@Resource.btnGuiDon" id="btnGuiDon" class="btn class_37" />
            </div>
            <div class="classLuuTam">
                <input type="button" value="@Resource.btnLuuTam" id="btnLuuTam" class="btn class_37" />
            </div>

            @if (WebApps.Session.SessionData.CurrentUser.Type != (int)CommonEnums.UserType.Customer)
            {
                <div class="classLuuTam">
                    <input type="button" value="Dữ liệu quá khứ" id="btnDuLieuCu" class="btn class_37" style="margin-left:5px" />
                </div>
            }
        </div>
    </fieldset>
</div>

@Html.Partial("~/Areas/TradeMark/Views/PLB01_SDD_3B/_PartialPreview_IU.cshtml")
<div id="divWrapperPreview" class="divWrapperPreview" style="display:none">
    <div class="dpop-preview" id="dpop-preview">
    </div>
</div>


<script>
    $(document).ready(function () {
        //$.datetimepicker.setLocale('vi');
        //$('.datetimepicker').datetimepicker({
        //    timepicker: false,
        //    format: 'd/m/Y',
        //    formatDate: 'd/m/Y',
        //    mask: '39/19/9999',
        //    validateOnBlur: false,
        //    scrollInput: false
        //});
        $("#0_txtCase_Name").focus();

        //Search suggestion
        var Name = $("#1_txtTenDayDu").val();
        $.ajax({
            url: '/trade-mark/GetNameSuggest/',
            type: 'POST',
            data: {
                pName: Name
            },
            sync: true, cache: false, traditional: true,
            success: function (data) {

                var lts = data.lst;
                $('#1_txtTenDayDu').autocomplete({
                    autoFocus: true,
                    source: function (request, response) {
                        var matcher = new RegExp("" + $.ui.autocomplete.escapeRegex(request.term.toUpperCase()), "i");
                        response($.grep(lts, function (item) {
                            return matcher.test(item.value);
                        }));
                    },
                    select: function (event, ui) {
                        $("#1_txtTenDayDu").val("");
                        event.preventDefault();
                        var arrVal = ui.item.value.split('|');
                        if (arrVal.length === 5) {
                            $("#1_txtTenDayDu").val(arrVal[0]);
                            $("#1_txtDiaChi").val(arrVal[1]);
                            $("#1_txtDienThoai").val(arrVal[2]);
                            $("#1_txtFax").val(arrVal[3]);
                            $("#1_txtEmail").val(arrVal[4]);
                        }

                    },
                    focus: function (event, ui) {
                        var arrResult = $(".ui-menu-item");
                        for (var i = 0; i < arrResult.length; i++) {
                            var label = $.trim($(arrResult[i]).text().split("-")[0]);
                            if (label == ui.item.name) {
                                $(".clsLiActive").removeClass("clsLiActive")
                                $(arrResult[i]).addClass("clsLiActive");
                                break;
                            }
                        }
                        event.preventDefault();
                    },
                    open: function (event, ui) {
                        $("ul").scrollTop(0);
                        event.preventDefault();
                    },
                });
            }
        });

        // nếu có appno
        if ('@_App_No' != "")
        {
            $("#3_SoDon").val('@_App_No');
            onChangeAppNo();
        }
    });

    function onChangeAppNo() {
        try {
            var _AppNo = $("#3_SoDon").val();
            if (_AppNo != "") {

                $.ajax({
                    type: 'POST',
                    url: '/trade-mark-3b/getMasterByAppNo/',
                    data: {
                        p_appNo: _AppNo,
                    },
                    async: true, cache: false, traditional: true,
                    beforeSend: function () {
                        CreateRollingWaitingIcon(true);
                    },
                    success: function (data) {
                        CreateRollingWaitingIcon(false);

                        $("#div_PartialThongTinChuDon").html(data.PartialThongTinChuDon);
                        $("#div_PartialThongTinDaiDienChuDon").html(data.PartialThongTinDaiDienChuDon);
                    }
                });
            }
        } catch (e) {
            alert(e);
        }
    }


    function funcChoiseDonUT(pID) {
        try {
            //if ($("#0_ckbCoSuDungDonUuTien").is(':checked')) {
            //    $("#div_ThongTinDonUuTien").removeClass("clssDisplaynone");
            //}
            //else {
            //    $("#div_ThongTinDonUuTien").addClass("clssDisplaynone");
            //}

            if (pID == "0_ckbCoSuDungDonUuTien") {
                $('#0_ckbCoSuDungDonUuTien').prop('checked', true);
                $('#KOUT').prop('checked', false);

                $("#div_ThongTinDonUuTien").removeClass("clssDisplaynone");

            } else {
                $('#KOUT').prop('checked', true);
                $('#0_ckbCoSuDungDonUuTien').prop('checked', false);

                $("#div_ThongTinDonUuTien").addClass("clssDisplaynone");
            }
        } catch (e) {
            alert(e);
        }
    }

    function ShowHiden_NguonGocDon() {
        try {
            ShowHiden_PCT();
            ShowHiden_DQSC();
            ShowHiden_GPHI();
        } catch (e) {
            alert(e);
        }
    }

    function ShowHiden_PCT() {
        try {
            if ($("#2_rdPCT").is(':checked')) {
                $("#divPCT").removeClass("clssDisplaynone");
                $("#txt_PCT_SoDon").focus();
            }
            else {
                $("#divPCT").addClass("clssDisplaynone");
            }


        } catch (e) {
            alert(e);
        }
    }

    function ShowHiden_DQSC() {
        try {
            if ($("#2_rdDQSC").is(':checked')) {
                $("#divDQSC").removeClass("clssDisplaynone");
                $("#txt_PCT_So").focus();
            }
            else {
                $("#divDQSC").addClass("clssDisplaynone");
            }


        } catch (e) {
            alert(e);
        }
    }

    function ShowHiden_GPHI() {
        try {
            if ($("#2_rdGPHI").is(':checked')) {
                $("#divGPHI").removeClass("clssDisplaynone");
                $("#txt_GPHI_SoDon").focus();
            }
            else {
                $("#divGPHI").addClass("clssDisplaynone");
            }

        } catch (e) {
            alert(e);
        }
    }

    function ShowHiden_PCT_SuaDoi() {
        try {
            if ($("#2_rdo_PCT_SuaDoi").is(':checked') ) {
                $("#divPCT_SuaDoi").removeClass("clssDisplaynone");
            }
            else {
                $("#divPCT_SuaDoi").addClass("clssDisplaynone");
            }
        } catch (e) {
            alert(e);
        }
    }

    function onChangeChuDonKhac() {
        try {
            if ($("#rdChuDonKhac").is(':checked')) {
                $("#divChungDonKhac001").removeClass("clssDisplaynone");
            }
            else {
                $("#divChungDonKhac001").addClass("clssDisplaynone");
            }
        } catch (e) {
            alert(e);
        }
    }

    function ThemTacGia() {
        try {

            var _id = parseInt($("#txt_id_tacgia").val()) + 1;
            $.ajax({
                type: 'POST',
                url: '/patent-a01/tac-gia/them-tac-gia/',
                data: {
                    p_id: _id
                },
                async: true, cache: false, traditional: true,
                beforeSend: function () {
                    CreateRollingWaitingIcon(true);
                },
                success: function (data) {
                    CreateRollingWaitingIcon(false);
                    $("#divTacGiaKhac").append(data);
                    $("#txt_id_tacgia").val(_id);
                }
            });
        } catch (e) {
            alert(e);
        }
    }

    function XoaTacGia(pId) {
        try {
            $("#" + pId).addClass("clssDisplaynone");
        } catch (e) {
            alert(e);
        }    
    }

    function ThemDonUuTien() {
        try {

            $.ajax({
                type: 'POST',
                url: '/patent-a01/don-uu-tien/them-don/',
                data: {
                    p_id: "2"
                },
                async: true, cache: false, traditional: true,
                beforeSend: function () {
                    CreateRollingWaitingIcon(true);
                },
                success: function (data) {
                    CreateRollingWaitingIcon(false);
                    $("#div_ThongTinDonUuTien").append(data);
                }
            });
        } catch (e) {
            alert(e);
        }
    }
    


    $("#btnGuiDon").click(function () {
        try {
            nvsConfirm(null, "@Html.Raw(WebApps.Resources.Resource.ConfirmGui)", function () {
                //Thông tin chủ đơn
                var formData = new FormData();

                var reponse = funcThongTinNhapHo(formData);
                if (reponse == false) {
                    return false;
                }

                var reponse = funcThongTinCaseName(formData, "0");
                if (reponse == false) {
                    return false;
                }

                if (funcThongTinChuDon(formData, "1") != true) {
                    return false;
                }

                formData.append("pInfo.Status", '@((int)Common.CommonData.CommonEnums.App_Status.DaGui_ChoPhanLoai_Admin)');
                var v_AppCode = $("#txtAppCode").val();
                if (v_AppCode === "") {
                    $('#txtAppCode').focus().val('');
                    showError('@Html.Raw(Resource.TM3B_ChonLoaiDonDK)');
                    return false;
                }

                // đại diện chủ đơn
                formData.append("pInfo.Appcode", v_AppCode);
                if (funcThongTinDaiDienChuDon(formData, "2") != true) {
                    return false;
                }
                var v_RepMasterType = $("input[name='_2_DaiDienChuDon']:checked").val();
                if (v_RepMasterType === "" || v_RepMasterType == undefined) {
                    jError("@Html.Raw(Resource.TM2B_ChonDaiDienChuDon)", "@Html.Raw(Resource.TM3B_Loi)", function () {
                        $("#_2_rdoNguoiDaiDienPL").focus()
                    });
                    return false;
                }
                formData.append("pInfo.Rep_Master_Type", v_RepMasterType);

                //Lấy thông tin detail
                reponse = funcGetAppDetail(formData);
                if (reponse == false) {
                    return false;
                }

                //Lấy thông tin tài liệu có trong đơn
                reponse = funGetDocumentFile(formData);
                if (reponse == false) {
                    return false;
                }

                reponse = funcGetCamKetChuDon(formData);
                if (reponse == false) {
                    return false;
                }

                $.ajax({
                    url: '/trade-mark-3b/register_PLB_01_SDD',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    traditional: true,
                    dataType: "json",
                    enctype: 'multipart/form-data',
                    async: true,
                    headers: { "cache-control": "no-cache" },
                    beforeSend: function () {
                        CreateRollingWaitingIcon(true);
                    },
                    success: function (data) {
                        CreateRollingWaitingIcon(false);
                        if (data != null && data.status >= 0) {
                            jAlert('@Html.Raw(Resource.GuiDonThanhCong)', ThongBao, function () {
                                window.location = "/trade-mark-mana/quan-ly-don";
                            });
                        } else {
                            jError("@Html.Raw(WebApps.Resources.Resource.LoiXuLyDuLieu)", "@Html.Raw(WebApps.Resources.Resource.ThongBao)", function () {
                            });
                        }
                    },
                    error: function (e) {
                        CreateRollingWaitingIcon(false);
                        console.log(e);
                    }
                });

            });

        } catch (e) {
            CreateRollingWaitingIcon(false);
            console.log(e);
        }
    });

    $("#btnDuLieuCu").click(function () {
        try {
            nvsConfirm(null, "@Html.Raw(WebApps.Resources.Resource.ConfirmGui)", function () {
                //Thông tin chủ đơn
                var formData = new FormData();

                var reponse = funcThongTinNhapHo(formData);
                if (reponse == false) {
                    return false;
                }

                var reponse = funcThongTinCaseName(formData, "0");
                if (reponse == false) {
                    return false;
                }

                if (funcThongTinChuDon(formData, "1") != true) {
                    return false;
                }

                formData.append("pInfo.Status", '@((int)Common.CommonData.CommonEnums.App_Status.DuLieuCu)');
                var v_AppCode = $("#txtAppCode").val();
                if (v_AppCode === "") {
                    $('#txtAppCode').focus().val('');
                    showError('@Html.Raw(Resource.TM3B_ChonLoaiDonDK)');
                    return false;
                }

                // đại diện chủ đơn
                formData.append("pInfo.Appcode", v_AppCode);
                if (funcThongTinDaiDienChuDon(formData, "2") != true) {
                    return false;
                }
                var v_RepMasterType = $("input[name='_2_DaiDienChuDon']:checked").val();
                if (v_RepMasterType === "" || v_RepMasterType == undefined) {
                    jError("@Html.Raw(Resource.TM2B_ChonDaiDienChuDon)", "@Html.Raw(Resource.TM3B_Loi)", function () {
                        $("#_2_rdoNguoiDaiDienPL").focus()
                    });
                    return false;
                }
                formData.append("pInfo.Rep_Master_Type", v_RepMasterType);

                //Lấy thông tin detail
                reponse = funcGetAppDetail(formData);
                if (reponse == false) {
                    return false;
                }

                //Lấy thông tin tài liệu có trong đơn
                reponse = funGetDocumentFile(formData);
                if (reponse == false) {
                    return false;
                }

                reponse = funcGetCamKetChuDon(formData);
                if (reponse == false) {
                    return false;
                }

                if (funcThongTinQuaKhu(formData, "1") != true) {
                    return false;
                }

                $.ajax({
                    url: '/trade-mark-3b/register_PLB_01_SDD',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    traditional: true,
                    dataType: "json",
                    enctype: 'multipart/form-data',
                    async: true,
                    headers: { "cache-control": "no-cache" },
                    beforeSend: function () {
                        CreateRollingWaitingIcon(true);
                    },
                    success: function (data) {
                        CreateRollingWaitingIcon(false);
                        if (data != null && data.status >= 0) {
                            jAlert('@Html.Raw(Resource.GuiDonThanhCong)', ThongBao, function () {
                                window.location = "/trade-mark-mana/quan-ly-don";
                            });
                        } else {
                            jError("@Html.Raw(WebApps.Resources.Resource.LoiXuLyDuLieu)", "@Html.Raw(WebApps.Resources.Resource.ThongBao)", function () {
                            });
                        }
                    },
                    error: function (e) {
                        CreateRollingWaitingIcon(false);
                        console.log(e);
                    }
                });

            });

        } catch (e) {
            CreateRollingWaitingIcon(false);
            console.log(e);
        }
    });

    $("#btnLuuTam").click(function () {
        try {
            nvsConfirm(null, "@Html.Raw(WebApps.Resources.Resource.ConfirmLuuTam)", function () {
                //Thông tin chủ đơn
                var formData = new FormData();
                var reponse = funcThongTinNhapHo(formData);
                if (reponse == false) {
                    return false;
                }

                var reponse = funcThongTinCaseName(formData, "0");
                if (reponse == false) {
                    return false;
                }

                if (funcThongTinChuDon(formData, "1") != true) {
                    return false;
                }
                formData.append("pInfo.Status", '@((int)Common.CommonData.CommonEnums.App_Status.Luu_tam)');

                var v_AppCode = $("#txtAppCode").val();
                if (v_AppCode === "") {
                    $('#txtAppCode').focus().val('');
                    showError('@Html.Raw(Resource.TM3B_ChonLoaiDonDK)');
                    return false;
                }

                // đại diện chủ đơn
                formData.append("pInfo.Appcode", v_AppCode);
                if (funcThongTinDaiDienChuDon(formData, "2") != true) {
                    return false;
                }
                var v_RepMasterType = $("input[name='_2_DaiDienChuDon']:checked").val();
                if (v_RepMasterType === "" || v_RepMasterType == undefined) {
                    jError("@Html.Raw(Resource.TM2B_ChonDaiDienChuDon)", "@Html.Raw(Resource.TM3B_Loi)", function () {
                        $("#_2_rdoNguoiDaiDienPL").focus()
                    });
                }
                formData.append("pInfo.Rep_Master_Type", v_RepMasterType);

                //Lấy thông tin detail
                reponse = funcGetAppDetail(formData);
                if (reponse == false) {
                    return false;
                }

                //Lấy thông tin tài liệu có trong đơn
                reponse = funGetDocumentFile(formData);
                if (reponse == false) {
                    return false;
                }

                reponse = funcGetCamKetChuDon(formData);
                if (reponse == false) {
                    return false;
                }

                $.ajax({
                    url: '/trade-mark-3b/register_PLB_01_SDD',
                    type: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    traditional: true,
                    dataType: "json",
                    enctype: 'multipart/form-data',
                    async: true,
                    headers: { "cache-control": "no-cache" },
                    beforeSend: function () {
                        CreateRollingWaitingIcon(true);
                    },
                    success: function (data) {
                        CreateRollingWaitingIcon(false);
                        if (data != null && data.status >= 0) {
                            jAlert('@Html.Raw(Resource.TM3B_LuuTamThanhCong)', "@Resource.TM3C_ThongBao", function () {
                                window.location = "/trade-mark-mana/quan-ly-don";
                            });
                        } else {
                            jError("@Resource.TM3B_LuuTamLoi");
                        }
                    },
                    error: function (e) {
                        CreateRollingWaitingIcon(false);
                        console.log(e);
                    }
                });

            });
        } catch (e) {
            CreateRollingWaitingIcon(false);
            console.log(e);
        }
    });

    function funcGetAppDetail(formData) {
        try {
            var _YeuCauSuaDoi = $("input[name='3_rdoYeuCauSuaDoi']:checked").val();
            if (_YeuCauSuaDoi === "" || _YeuCauSuaDoi == undefined) {
                jError("@Resource.TM3B_GiaTriDonYCSuaDoi", "@Resource.TM3B_Loi", function () {
                    $("#3_rdDonSangChe").focus()
                });
                return false;
            }
            formData.append("pDetail.Request_Change_Type", parseInt(_YeuCauSuaDoi));

            var _soHinh = 0;
            var _soTrang = 0;
            if ($("#3_rdDonSangChe").is(':checked') || $("#3_rdKieuDangCongNghiep ").is(':checked')) {
                _soHinh = $("#txt_SoHinh").val();
                _soTrang = $("#txt_SoTrang").val();

                if (_soHinh == "" || _soTrang == "") {

                    if (_soHinh == "") {
                        jError("@Resource.TM3B_SoHinhKhongDuocDeTrong", "@Resource.TM3B_Loi", function () {
                            $("#txt_SoHinh").focus()
                        });
                        return false;
                    }

                    if (_soTrang == "") {
                        jError("@Resource.TM3B_SoTrangKhongDuocDeTrong", "@Resource.TM3B_Loi", function () {
                            $("#txt_SoTrang").focus()
                        });
                        return false;
                    }
                }
            }
            formData.append("pDetail.Number_Pic", parseInt(_soHinh));
            formData.append("pDetail.Number_Page", parseInt(_soTrang));

            // số đơn
            var _3_SoDon = $("#3_SoDon").val();
            if (_3_SoDon === "" || _3_SoDon == undefined) {
                jError("@Resource.TM3B_SoDonKhongDuocDeTrong", "@Resource.TM3B_Loi", function () {
                    $("#3_SoDon").focus()
                });
                return false;
            }
            formData.append("pDetail.App_No_Change", _3_SoDon);

            // Nội dung yêu cầu sửa đổi
            var _Request_To_Type = $("input[name='4_rdoNoiDungYeuCauSuaDoi']:checked").val();
            if (_Request_To_Type === "" || _Request_To_Type == undefined) {
                jError("@Resource.TM3B_ChonNoiDungYCSuaDoi", "@Resource.TM3B_Loi", function () {
                    $("#4_rdTenChuDon").focus()
                });
                return false;
            }
            formData.append("pDetail.Request_To_Type", parseInt(_Request_To_Type));

            // đề nghị sửa thành
            var _4_DeNghiSuaThanh = $("#4_DeNghiSuaThanh").val();
            if (_4_DeNghiSuaThanh === "" || _4_DeNghiSuaThanh == undefined) {
                jError("@Resource.TM3B_DeNghiSuaThanhTrong", "@Resource.TM3B_Loi", function () {
                    $("#4_DeNghiSuaThanh").focus()
                });
                return false;
            }
            formData.append("pDetail.Request_To_Content", _4_DeNghiSuaThanh);
        } catch (e) {
            console.log(e);
            showError('@Resource.TM3B_InternetError');
            return false;
        }
    }

    function funGetDocumentFile(formData) {
        try {
            var Isuse = 0, Note = "", reponse = false;

            // 1. Tờ khai
            reponse = funcGetCheckValueAndText(formData, "ckb_6_Doc_ToKhai", "0");
            formData.append("pAppDocumentInfo[0].CHAR01", $("#txt_6_Doc_ToKhai").val());

            // 2. Tài liệu xác nhận
            reponse = funcGetCheckValueAndText(formData, "ckb_6_Doc_TLXacNhan", "1");
            formData.append("pAppDocumentInfo[1].CHAR01", $("#txt_6_Doc_TLXacNhan").val());

            // 3. Bản dịch tiếng Việt
            reponse = funcGetCheckValueAndText(formData, "ckb_6_Doc_BDichTv", "2");
            formData.append("pAppDocumentInfo[2].CHAR01", $("#txt_6_Doc_BDichTv").val());

            // 4. Giấy uỷ quyền bằng tiếng
            reponse = funcGetCheckValueAndText(formData, "ckb_6_Doc_POA", "3");
            formData.append("pAppDocumentInfo[3].CHAR01", $("#txt_6_Doc_POA").val());

            // 4.1 Bản dịch tiếng Việt, gồm
            reponse = funcGetCheckValueAndText(formData, "ckb_6_Doc_BanDichPOA", "4");
            formData.append("pAppDocumentInfo[4].CHAR01", $("#txt_6_Doc_BanDichPOA").val());

            // 4.2 Bản gốc
            reponse = funcGetCheckValueAndText(formData, "ckb_6_Doc_BanGocPOA", "5");

            // 4.3 Bản sao
            reponse = funcGetCheckValueAndText(formData, "ckb_6_Doc_BanSaoPOA", "6");

            // 4.3.1  Bản gốc sẽ nộp sau
            reponse = funcGetCheckValueAndText(formData, "ckb_6_Doc_BanGocPOA_Later", "7");

            // 4.3.2  Bản gốc đã nộp theo đơn số
            reponse = funcGetCheckValueAndText(formData, "ckb_6_Doc_BanGocPOA_ByApp", "8");
            formData.append("pAppDocumentInfo[8].CHAR01", $("#txt_6_Doc_BanGocPOA_ByApp").val());

            // 5. Bản sao chứng từ nộp phí, lệ phí
            reponse = funcGetCheckValueAndText(formData, "ckb_6_Doc_BanSaoChungTu", "9");

            // 6.Tài liệu khác, cụ thể:
            reponse = funcGetCheckValueAndText(formData, "ckb_6_Doc_Other", "10");
            formData.append("pAppDocumentInfo[10].CHAR01", $("#txt_6_Doc_Other").val());
        } catch (e) {
            console.log(e);
        }
    }

    function funcGetCheckValueAndText(formData, pID, pItem) {
        try {
            var Isuse = 0, Note = "";
            //Các tài liệu có trong đơn
            if ($("#" + pID).prop('checked') == true) {
                Isuse = 1;
            }
            formData.append("pAppDocumentInfo[" + pItem + "].keyFileUpload", pID);
            formData.append("pAppDocumentInfo[" + pItem + "].Document_Id", $("#" + pID).val());
            formData.append("pAppDocumentInfo[" + pItem + "].Isuse", Isuse);
            return true;
        } catch (e) {
            return false;
        }

    }
</script>
